<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styleHeader.css">
    <link rel="stylesheet" href="css/stylePerfilNutri.css">
    <link rel="icon" href="imagens/logo-icon.png" type="image/x-icon">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@40,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/node_modules/simple-notify/dist/simple-notify.min.css">
    <title>Perfil Do Nutricionista - NutriWeb</title>
</head>
    <body class="body">
        <%- include('../partials/header.ejs') %>

        <section class="home-mobile">
            <section class="menu">
                <section class="left-section">
                    <a href="/"><img src="imagens/logo.png" alt="Logo" class="logo"></a>
                </section>

                <section class="right-section">
                    <section class="material-icons search-icon md-24 menu-icon">menu</section>
                </section>
            </section>
            
            <section class="mobile-menu hidden">
                <ul>
                    <li><a href="/perfilcliente">Meu Perfil</a></li>
                    <li><a href="/ranking">Ranking</a></li>
                    <li><a href="/profissionais">Profissionais</a></li>
                    <li><a href="/premium">Premium</a></li>
                    <li><a href="/login">Entrar</a></li>
                </ul>
            </section>
         </section>

         <section id="imageModal" class="image-modal">
            <section class="close-modal">&times;</section>
            <img class="modal-content" id="modalImage">
        </section>

        <section id="modal-publicacao" class="modal-publicacao">
            <section class="modal-content-publicacao">
        
                <section class="modal-image-publicacao">
                    <img src="imagens/img-login.jpg" alt="Content Image" id="modal-img">
                </section>
        
                <section class="modal-card-publicacao">
                    <section class="modal-card-publicacao-top">
                        <section class="container-card-header">
                            <a href="/perfilnutri?id=" class="card-perfil card-perfil-modal">
                                <section class="card-header card-header-modal-publicacao">
                                    <section class="card-header-img perfil-foto-container-modal">
                                        <img src="imagens/profissional1.png" alt="Profile" id="modal-profile">
                                        
                                        <section class="selo-premium-star-modal" id="selo-premium-modal" style="display: none;">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="12" cy="12" r="11" fill="url(#goldGradientModalPub)"/>
                                                <path d="M12 4L13.5 9H18.5L14.5 12L16 17L12 14L8 17L9.5 12L5.5 9H10.5L12 4Z"
                                                    fill="white"
                                                    stroke="white"
                                                    stroke-width="0.5"/>
                                                <defs>
                                                    <linearGradient id="goldGradientModalPub" x1="0%" y1="0%" x2="100%" y2="100%">
                                                        <stop offset="0%" style="stop-color:#FFD700;stop-opacity:1" />
                                                        <stop offset="100%" style="stop-color:#FFA500;stop-opacity:1" />
                                                    </linearGradient>
                                                </defs>
                                            </svg>
                                        </section>
                                    </section>
                                    
                                    <section>
                                        <section class="name" id="modal-name">Julia</section>
                                        <section class="profession">Nutricionista</section>
                                    </section>
                                </section>
                            </a>
            
                            <section class="controle-modal">
                                <section id="menu-denunciar" class="menu-denunciar">
                                    <section class="menu-pontos" id="menu-pontos">⋮</section>
                                    <section class="denunciar-opcao" id="denunciar-opcao">Denunciar</section>
                                </section>
            
                                <section class="close-modal-publicacao md-24" id="close-modal-publicacao">&times;</section>
                            </section>
                        </section>
            
                        <section class="modal-image-mobile">
                            <img src="imagens/img-login.jpg" alt="Content Image" id="modal-img-mobile">
                        </section>
            
                        <section class="modal-description-publicacao">
                        </section>
                    </section>
        
                    <section class="modal-card-publicacao-bottom">
                        <section class="modal-card-publicacao-bottom-top">
                            <section class="btn-favorite-comment">
                                <section class="material-icons btn-favorite">favorite</section>
                                <section class="material-icons btn-comment">chat</section>
                            </section>
                
                            <section class="comentarios-lista" id="comentarios-lista-publicacao">
                                <p class="sem-comentarios" id="sem-comentarios-publicacao">Seja o primeiro a comentar!</p>
                            </section>
                        </section>
            
                        <section class="container-comentarios">
                            <section class="material-icons">account_circle</section>
                            <input type="text" id="input-comentario-publicacao" placeholder="Adicione um comentário...">
                            <button class="btn-enviar" id="btn-enviar-publicacao">
                                <section class="material-icons">send</section>
                            </button>
                        </section>              
                    </section>      
                </section>
            </section>
        </section>

        <section id="conteudo-completo">    
            <section class="overlay hidden">
                <section class="container-avaliar">
                    <section class="barra-avaliar"></section>
                    <section class="avaliar">
                        <a href="<%= headerUsuario.urlPerfil %>" class="perfil-avaliar">
                            <img src="<%= headerUsuario.fotoPerfil %>" id="img-avaliar">
                            <section>
                                <section id="nome-avaliar"><%= headerUsuario.nome %></section>
                                <section id="legenda-avaliar">As postagens são públicas.</section>
                            </section>
                        </a>
                        <section class="content-avaliar">
                            <section class="notification"></section>
                            <section id="rating">
                                <section class="star" data-value="1">★</section>
                                <section class="star" data-value="2">★</section>
                                <section class="star" data-value="3">★</section>
                                <section class="star" data-value="4">★</section>
                                <section class="star" data-value="5">★</section>
                            </section>
                            <textarea id="avaliacao" name="avaliacao" value="" class="" rows="15" cols="70" maxlength="200" placeholder="Faça sua avaliação deste profissional"></textarea>
                                <section class="buttons-avaliar">
                                    <button type="button" onclick="fecharMenu()" class="cancelar">Cancelar</button>
                                    <button type="submit" id="postar">Postar</button>
                                </section>
                        </section>
                    </section>
                </section>
            </section>
            <% if (nutricionista) { %>
                <% if (isOwner) { %>
                    <section id="imagem_de_fundo" style="background-image: url('<%= headerUsuario.fotoBanner %>')"></section>
                <% } %>
                <% if (!isOwner) { %>
                    <section id="imagem_de_fundo" style="background-image: url('<%= nutricionista.fotoBanner %>')"></section>
                <% } %>
            <% } else { %>
                <section id="imagem_de_fundo" style="background-image: url('imagens/bannerperfilnutri.png')"></section>
            <% } %>
            <main class="conteudo">
                <section class="back">
                    <a href="/" class="back-button">
                        <section class="material-icons arrow-icon md-24">arrow_back_ios</section>
                        <section class="back-arrow">Voltar</section>
                    </a>
                </section>
                <% if (erro) { %>
                    <section class="erro-mensagem">
                        <p><%= erro %></p>
                    </section>
                <% } else if (nutricionista) { %>
                    <section id="info_perfil">
                        <section id="container_foto">
                            <section class="perfil-foto-container-principal">
                                <% if (isOwner) { %>
                                    <img src="<%= headerUsuario.fotoPerfil %>" 
                                         alt="Foto de perfil" 
                                         class="foto_perfil" 
                                         id="foto-perfil"
                                         onerror="this.src='imagens/foto_perfil.jpg'">
                                    
                                    <% if (headerUsuario.premium && headerUsuario.premium.temPremium) { %>
                                        <section class="selo-premium-star-perfil">
                                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="12" cy="12" r="11" fill="url(#goldGradientPerfilOwner)"/>
                                                <path d="M12 4L13.5 9H18.5L14.5 12L16 17L12 14L8 17L9.5 12L5.5 9H10.5L12 4Z"
                                                    fill="white"
                                                    stroke="white"
                                                    stroke-width="0.5"/>
                                                <defs>
                                                    <linearGradient id="goldGradientPerfilOwner" x1="0%" y1="0%" x2="100%" y2="100%">
                                                        <stop offset="0%" style="stop-color:#FFD700;stop-opacity:1" />
                                                        <stop offset="100%" style="stop-color:#FFA500;stop-opacity:1" />
                                                    </linearGradient>
                                                </defs>
                                            </svg>
                                        </section>
                                    <% } %>
                                    
                                    
                                <% } else { %>
                                    <img src="<%= nutricionista.fotoPerfil %>" 
                                         alt="Foto de perfil" 
                                         class="foto_perfil" 
                                         id="foto-perfil"
                                         onerror="this.src='imagens/foto_perfil.jpg'">
                                    
                                    <% if (nutricionista.premium && nutricionista.premium.temPremium) { %>
                                        <section class="selo-premium-star-perfil-visitor">
                                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="12" cy="12" r="11" fill="url(#goldGradientPerfilVisitor)"/>
                                                <path d="M12 4L13.5 9H18.5L14.5 12L16 17L12 14L8 17L9.5 12L5.5 9H10.5L12 4Z"
                                                    fill="white"
                                                    stroke="white"
                                                    stroke-width="0.5"/>
                                                <defs>
                                                    <linearGradient id="goldGradientPerfilVisitor" x1="0%" y1="0%" x2="100%" y2="100%">
                                                        <stop offset="0%" style="stop-color:#FFD700;stop-opacity:1" />
                                                        <stop offset="100%" style="stop-color:#FFA500;stop-opacity:1" />
                                                    </linearGradient>
                                                </defs>
                                            </svg>
                                        </section>
                                    <% } %>
                                <% } %>
                            </section>
                            <% if (isOwner) { %>
                                <a href="/config"><i class="fa-solid fa-gear"></i></a>
                            <% } %>
                        </section>

                        <section class="conteudo_perfil">
                            <section class="nome_perfil">
                                <h1 id="nomenutri"><%= nutricionista.nome %></h1>
                                <section class="tipo-nutri" id="tipo-nutri">
                                    <% if (nutricionista.especializacoes) { %>
                                        <section class="especializacoes">Nutrição <%= nutricionista.especializacoes %></section>
                                    <% } %>
                                </section>
                            </section>
                
                            <section id="infrmacoes_nutri">
                                <h1>Sobre:</h1>
                                <section id="sobremim"><%= nutricionista.sobreMim %></section>
                            </section>
                
                            <section id="rede_sociais">
                                <h4>Informações de Contato</h4>
                                <% if (nutricionista.telefone) { %>
                                    <section class="contato">
                                        <img src="imagens/contato-whatsapp.png" alt="" class="icone_contato">
                                        <section id="whatsapp"><%= nutricionista.telefone %></section>
                                    </section>
                                <% } else if (contatosSociais.whatsapp) { %>
                                    <section class="contato">
                                        <img src="imagens/contato-whatsapp.png" alt="" class="icone_contato">
                                        <section id="whatsapp"><%= contatosSociais.whatsapp %></section>
                                    </section>
                                <% } %>
                
                                <% if (contatosSociais.instagram) { %>
                                    <section class="contato">
                                        <img src="imagens/contato-instagram.png" alt="" class="icone_contato">
                                        <section id="instagram">
                                            <a href="<%= contatosSociais.instagram %>" target="_blank">Instagram</a>
                                        </section>
                                    </section>
                                <% } %>
                
                                <section class="contato">
                                    <img src="imagens/contato-email.png" alt="" class="icone_contato">
                                    <section id="email"><%= nutricionista.email %></section>
                                </section>
                
                                <% if (contatosSociais.facebook) { %>
                                    <section class="contato">
                                        <img src="imagens/contato-facebook.png" alt="" class="icone_contato">
                                        <section>
                                            <a href="<%= contatosSociais.facebook %>" target="_blank">Facebook</a>
                                        </section>
                                    </section>
                                <% } %>
                
                                <% if (contatosSociais.youtube) { %>
                                    <section class="contato">
                                        <img src="imagens/contato-youtube.png" alt="" class="icone_contato">
                                        <section>
                                            <a href="<%= contatosSociais.youtube %>" target="_blank">YouTube</a>
                                        </section>
                                    </section>
                                <% } %>
                            </section>
                        </section>
            
                        <section id="editar-perfil">
                            <section class="material-symbols-outlined caneta">
                                edit
                            </section>
                            <p>Editar Perfil</p>
                        </section>
                    </section>
            
                <% } else { %>
                    <section class="erro-mensagem">
                        <p>Perfil não encontrado.</p>
                    </section>
                <% } %>
            
                    <section id="editar-perfil">
             
                        <section class="material-symbols-outlined caneta">
                            edit
                            </section>
                        <p>
                            Editar Perfil
                        </p>
                    </section>

                <section id="publi">
                
                <h1 class="titulopubli">Publicações</h1>
                
                <% if (isOwner) { %>
                    <a href="" id="novapublicacao">
                        <section class="material-symbols-outlined">add</section>
                        <section>Nova Publicação</section>
                    </a>
                <% } %>

                <section class="modal" id="modal">
                    <section class="modal-content">
                        
                        <section class="modal-left">
                            <input type="file" id="input-imagem" accept="image/png, image/jpeg">
                            <label for="input-imagem" class="upload-wrapper">
                                <img id="preview-image" src="" alt="Preview">
                                <section class="upload-area">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="110" height="110" fill="none" stroke="#444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                        <path d="M21 15l-5-5L5 21"></path>
                                    </svg>
                                    <section class="btn-upload">Adicione sua imagem ou vídeo</section>
                                </section>
                            </label>
                        </section>

                        <section class="modal-right">
                            <section class="legenda-container">
                                <h3>Legenda</h3>
                                <textarea class="editor" id="legenda" maxlength="1000" rows="5"></textarea>
                                <section id="char-count">0 / 1000</section>
                            </section>

                            <button class="btn-postar">Postar</button>
                        </section>
                            <section class="close" id="fecharModal">&times;</section>
                        </section>
                    </section>
                </section>

                <section class="grid-publicacoes">
                    <% if (publicacoes && publicacoes.length > 0) { %>
                        <% publicacoes.forEach(function(pub) { %>
                            <article class="img-post"
                                    data-id="<%= pub.id %>"
                                    data-nome="<%= pub.nome %>"
                                    data-profissao="Nutrição <%= pub.profissao %>"
                                    data-imgperfil="<%= pub.imgPerfil %>"
                                    data-imgconteudo="<%= pub.imgConteudo %>"
                                    data-titulo=""
                                    data-conteudo1="<%= pub.legenda %>"
                                    data-premium="<%= nutricionista.premium && nutricionista.premium.temPremium ? 'true' : 'false' %>"
                                    data-premium-duracao="<%= nutricionista.premium && nutricionista.premium.duracao ? nutricionista.premium.duracao : '' %>">
                                <img src="<%= pub.imgConteudo %>" 
                                     alt="<%= pub.categoria %>" 
                                     class="post_img"
                                     onerror="this.src='imagens/placeholder-post.jpg'">
                            </article>
                        <% }); %>
                    <% } else { %>
                        <section class="sem-publicacoes" style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #666;">
                            <p><%= isOwner ? 'Você ainda não possui publicações.' : 'Este nutricionista ainda não possui publicações.' %></p>
                            <% if (isOwner) { %>
                                <p style="margin-top: 10px; font-size: 14px;">Clique em "Nova Publicação" para começar!</p>
                            <% } %>
                        </section>
                    <% } %>
                </section>

                <section id="modal-denuncia-publicacao" class="modal" style="display: none;">
                    <section class="modal-content-denuncia">
                        <section class="close-denuncia" id="close-denuncia-publicacao">&times;</section>
                        <h2>Denúncia</h2>
                        <p>O que esse comentário infringiu?</p>
                
                        <button class="btn-denuncia">Discurso de ódio ou preconceito</button>
                        <button class="btn-denuncia">Assédio ou bullying</button>
                        <button class="btn-denuncia">Linguagem ofensiva ou agressiva</button>
                        <button class="btn-denuncia">Spam ou conteúdo irrelevante</button>
                
                        <textarea placeholder="Outro motivo? Descreva aqui (opcional)..." rows="3"></textarea>
                
                        <button class="btn-enviar-denuncia">Enviar</button>
                    </section>
                
                    <section class="mensagem-confirmacao" style="display: none;">
                        <button class="fechar-msg" aria-label="Fechar">&times;</button>
                        <h2>Sua ajuda é muito importante!</h2>
                        <p>Iremos avaliar esse comentário.<br>Obrigado!</p>
                    </section>
                </section>
                
                <section id="avaliar_nutri">
                    <h1 id="tituloavaliacao">Avaliações</h1>
                    <section id="container-avaliacoes">
                        <section class="sem-avaliacoes">
                            <p>Seja o primeiro a avaliar!</p>
                        </section>

                    <% if (!isOwner) { %>
                        <button class="bookmarkBtn">Avaliar Profissional</button>
                    <% } %>
                </section>
            </main>

                     <footer class="footer">
                        <section class="footer-container">
            
                            <section class="footer-logo">
                                <a href="/"><img src="imagens/logo.png" class="img-footer" alt="Logo" class="logo"></a>
                                <a href="/"><h3>NutriWeb</h3></a>
                            </section>
            
                            <section class="footer-informacao">
                                <a href="/">Página Inicial</a>
                                <a href="/ranking">Ranking</a>
                                <a href="/profissionais">Profissionais</a>
                                <a href="/premium">Premium</a>
                                <a href="/login">Login</a>
                                <a href="/">Sobre nós</a> 
                                <a href="/tipoNutri">Como escolher o profissional ideal?</a>
                            </section>
                      
                          <section class="footer-social">
                            <h3>Siga-nos</h3>
                            <section class="social-icons">
                              <a href="https://www.instagram.com/nutriweb_oficial/"><i class="fab fa-instagram"></i></a>
                            </section>
                            <p>Conecte-se com os melhores nutricionistas e encontre o profissional ideal para você.</p>
                          </section>
                        </section>
                        
                        <section class="footer-bottom">
                          <p>&copy; 2024 NutriWeb. Todos os direitos reservados.</p>
                        </section>
                    </footer>
         </section>
    </body>
    <script src="js/caracteres.js"></script>
    <script>
        const headerUsuario = JSON.parse('<%- JSON.stringify(headerUsuario || { estaLogado: false }) %>');
    </script>
    <script src="js/modalPublicacao.js"></script>
    <script src="js/modalPublicacaoPerfilNutri.js"></script>
    <script src="js/avaliacoes.js"></script>
    <script src="js/indexMenu.js"></script>
    <script src="js/uploadimage.js"></script>
    <script src="js/modalHome.js"></script>
    <script src="js/alerts.js"></script>
</html>