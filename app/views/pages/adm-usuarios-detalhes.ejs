<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes do Usuário - Painel Administrativo</title>
    <link rel="stylesheet" href="/css/styleAdm.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="/css/admin-detalhes.css">
</head>
<body>
    <section class="navbar navbar-inverse">
        <section class="navbar-header">
            <ul class="nav navbar-nav">
                <li><a href="/adm">Dashboard</a></li>
                <li class="active"><a href="/adm/usuarios">Usuários</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/">Voltar ao Site</a></li>
            </ul>
        </section>
    </section>

    <section class="container">
        <section class="page-header">
            <h2>
                <span class="material-symbols-outlined">person</span>
                Detalhes do Usuário
            </h2>
            <p class="page-subtitle">Informações completas do usuário cadastrado</p>
        </section>

        <% if (usuario) { %>
            <section class="user-details-card">
                <section class="card-header">
                    <section class="user-avatar">
                        <span class="material-symbols-outlined">account_circle</span>
                    </section>
                    <section class="user-header-info">
                        <h3><%= usuario.NomeCompleto %></h3>
                        <p class="user-type">
                            <span class="badge badge-<%= usuario.UsuarioTipo === 'N' ? 'success' : 'info' %>">
                                <%= usuario.TipoUsuarioNome %>
                            </span>
                            <span class="status-badge status-<%= usuario.UsuarioStatus === 1 ? 'ativo' : 'inativo' %>">
                                <%= usuario.StatusNome %>
                            </span>
                        </p>
                    </section>
                </section>

                <section class="card-body">
                    <section class="info-section">
                        <h4>
                            <span class="material-symbols-outlined">badge</span>
                            Informações Básicas
                        </h4>
                        <dl class="info-list">
                            <div class="info-item">
                                <dt>ID do Usuário</dt>
                                <dd><span class="info-value">#<%= usuario.id %></span></dd>
                            </div>
                            <div class="info-item">
                                <dt>Nome Completo</dt>
                                <dd><%= usuario.NomeCompleto %></dd>
                            </div>
                            <div class="info-item">
                                <dt>Email</dt>
                                <dd><%= usuario.Email %></dd>
                            </div>
                            <div class="info-item">
                                <dt>Telefone</dt>
                                <dd>
                                    <%= usuario.Telefone ?
                                        `(${usuario.Telefone.substring(0,2)}) ${usuario.Telefone.substring(2,7)}-${usuario.Telefone.substring(7)}`
                                        : 'Não informado' %>
                                </dd>
                            </div>
                            <div class="info-item">
                                <dt>Data de Nascimento</dt>
                                <dd>
                                    <%= usuario.DataNascimento ? 
                                        new Date(usuario.DataNascimento).toLocaleDateString('pt-BR') 
                                        : 'Não informado' %>
                                </dd>
                            </div>
                        </dl>
                    </section>

                    <section class="info-section">
                        <h4>
                            <span class="material-symbols-outlined">location_on</span>
                            Endereço
                        </h4>
                        <dl class="info-list">
                            <div class="info-item">
                                <dt>CEP</dt>
                                <dd>
                                    <%= usuario.CEP ? 
                                        usuario.CEP 
                                        : 'Não informado' %>
                                </dd>
                            </div>
                        </dl>
                    </section>

                    <% if (usuario.UsuarioTipo === 'N') { %>
                        <section class="info-section">
                            <h4>
                                <span class="material-symbols-outlined">medical_services</span>
                                Informações Profissionais (Nutricionista)
                            </h4>
                            <dl class="info-list">
                                <div class="info-item">
                                    <dt>CRN</dt>
                                    <dd>
                                        <%= usuario.Crn ? 
                                            usuario.Crn 
                                            : 'Não informado' %>
                                    </dd>
                                </div>
                                <div class="info-item">
                                    <dt>Razão Social</dt>
                                    <dd>
                                        <%= usuario.RazaoSocial ? 
                                            usuario.RazaoSocial 
                                            : 'Não informado' %>
                                    </dd>
                                </div>
                            </dl>
                        </section>
                    <% } %>

                    <% if (usuario.UsuarioTipo === 'C') { %>
                        <section class="info-section">
                            <h4>
                                <span class="material-symbols-outlined">fingerprint</span>
                                Documentação (Cliente)
                            </h4>
                            <dl class="info-list">
                                <div class="info-item">
                                    <dt>CPF</dt>
                                    <dd>
                                        <%= usuario.CPF ? 
                                            usuario.CPF 
                                            : '<span class="not-informed">Não informado</span>' %>
                                    </dd>
                                </div>
                            </dl>
                        </section>
                    <% } %>
                </section>

                <section class="card-footer">
                    <a href="/adm/usuarios-editar?id=<%= usuario.id %>" class="btn btn-warning">
                        <span class="material-symbols-outlined">edit</span>
                        Editar Usuário
                    </a>
                    <a href="/adm/usuarios" class="btn btn-default">
                        <span class="material-symbols-outlined">arrow_back</span>
                        Voltar para Lista
                    </a>
                </section>
            </section>
        <% } else { %>
            <section class="alert alert-danger">
                <strong>Erro!</strong> Usuário não encontrado.
            </section>
            <a href="/adm/usuarios" class="btn btn-primary">
                <span class="material-symbols-outlined">arrow_back</span>
                Voltar para Lista
            </a>
        <% } %>

        <footer>
            <p>&copy; 2025 Sistema NutriWeb | Painel Administrativo</p>
        </footer>
    </section>
</body>
</html>