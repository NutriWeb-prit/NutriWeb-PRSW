<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styleHeader.css">
    <link rel="stylesheet" href="css/stylePerfilCliente.css">
    <link rel="icon" href="imagens/logo-icon.png" type="image/x-icon">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@40,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>Meu Perfil - NutriWeb</title>
</head>
    <body class="body">
        
        <%- include('../partials/header.ejs') %>
            
        <section class="home-mobile">

            <section class="menu">
                <section class="left-section">
                    <a href="/"><img src="imagens/logo.png" alt="Logo" class="logo"></a>
                </section>

                <section class="right-section">
                    <section class="material-icons search-icon md-24 menu-icon">menu</section>
                </section>
            </section>
            
            <section class="mobile-menu hidden">
                <ul>
                    <li><a href="/perfilcliente">Meu Perfil</a></li>
                    <li><a href="/ranking">Ranking</a></li>
                    <li><a href="/profissionais">Profissionais</a></li>
                    <li><a href="/premium">Premium</a></li>
                    <li><a href="/login">Entrar</a></li>
                </ul>
            </section>

        </section>

        <!-- Conteudo do site -->

        <section id="conteudo-completo">
            <% if (isOwner) { %>
                <section id="imagem_de_fundo" style="background-image: url('<%= headerUsuario.fotoBanner %>')"></section>
            <% } %>
            <% if (!isOwner) { %>
                <section id="imagem_de_fundo" style="background-image: url('<%= cliente.fotoBanner %>')"></section>
            <% } %>
            <main class="conteudo">
                <section class="back">
                    <a href="/" class="back-button">
                        <section class="material-icons arrow-icon md-24">arrow_back_ios</section>
                        <section class="back-arrow">Voltar</section>
                    </a>
                </section>
                <section id="info_perfil">
                    <section id="container_foto">
                        <% if (isOwner) { %>
                            <img src="<%= headerUsuario.fotoPerfil %>"
                            alt="Foto de perfil" 
                            class="foto_perfil" 
                            id="foto-perfil">
                            <a href="/config"><i class="fa-solid fa-gear"></i></a>
                        <% } %>

                        <% if (!isOwner) { %>
                            <img src="<%= cliente ? cliente.fotoPerfil : 'imagens/foto_perfil.jpg' %>" 
                            alt="Foto de perfil" 
                            class="foto_perfil" 
                            id="foto-perfil">
                        <% } %>
                    </section><br>
        
                    <section id="infrmacoes_nutri">
                        <% if (cliente) { %>
                            <section class="nome_perfil">
                                <h1 id="nomeCliente"><%= cliente.nome %></h1>
                                <p class="tipo-nutri" id="tipo-nutri">Cliente</p>
                            </section>
        
                            <section class="objetivo_interesses_perfil">
                                <% if (cliente.interesses && cliente.interesses !== 'Nenhum interesse cadastrado') { %>
                                    <h3>Interesses Nutricionais:</h3>
                                    <section id="interesses"><%= cliente.interesses %></section>
                                <% } %>
                            </section>
                        <% } else { %>
                            <h1 id="nomeCliente">Dados não encontrados</h1>
                            <p class="tipo-nutri">Erro ao carregar perfil</p>
                        <% } %>
                    </section>
                    
                    <section id="opcoes-perfil">
                        <section class="material-symbols-outlined opc-perfil">edit</section>
                        <section class="material-symbols-outlined opc-perfil hidden">visibility</section>
                        <section class="material-symbols-outlined opc-perfil">visibility_off</section>
                    </section>
        
                    <section id="rede_sociais">
                        <h4>Informações de Contato</h4>
                        <% if (cliente && cliente.telefone) { %>
                            <section class="contato">
                                <img src="imagens/contato-whatsapp.png" alt="" class="icone_contato">
                                <section id="whatsapp"><%= cliente.telefone %></section>
                            </section>
                        <% } %>
             
                        <% if (cliente && cliente.email) { %>
                            <section class="contato">
                                <img src="imagens/contato-email.png" alt="" class="icone_contato">
                                <section id="email"><%= cliente.email %></section>
                            </section>
                        <% } %>
                    </section>
             
                </section>
        
                <section id="publi">
                    <section id="titulopubli">Publicações Curtidas</section>
        
                    <section class="grid-publicacoes">
                        <% if (publicacoesCurtidas && publicacoesCurtidas.length > 0) { %>
                            <% publicacoesCurtidas.forEach(function(publicacao) { %>
                                <article class="img" title="<%= publicacao.legenda %>">
                                    <img src="<%= publicacao.imagem %>" 
                                         alt="<%= publicacao.categoria %>" 
                                         class="post_img"
                                         data-id="<%= publicacao.id %>">
                                    <section class="post-info">
                                        <section class="categoria"><%= publicacao.categoria %></section>
                                        <% if (publicacao.estrelas > 0) { %>
                                            <section class="estrelas">⭐ <%= publicacao.estrelas %></section>
                                        <% } %>
                                    </section>
                                </article>
                            <% }); %>
                        <% } else { %>
                            <section class="sem-publicacoes">
                                <p>Nenhuma publicação curtida ainda.</p>
                                <p>Explore nosso feed para descobrir conteúdos interessantes!</p>
                            </section>
                        <% } %>
                    </section>
                </section>
                
                <section id="avaliar_nutri">
                    <h1 id="tituloavaliacao">Avaliações</h1>
                    <section id="container-avaliacoes">
                        <section class="sem-avaliacoes">
                            <p>Nenhum nutricionista avaliado ainda.</p>
                        </section>
                    </section>
                </section>

                <% if (erro) { %>
                    <script>
                        console.error('Erro no perfil:', '<%= erro %>');
                    </script>
                <% } %>
                     </main>

                     <footer class="footer">
                        <section class="footer-container">
            
                            <section class="footer-logo">
                                <a href="/"><img src="imagens/logo.png" class="img-footer" alt="Logo" class="logo"></a>
                                <a href="/"><h3>NutriWeb</h3></a>
                            </section>
            
                            <section class="footer-informacao">
                                <a href="/">Página Inicial</a>
                                <a href="/ranking">Ranking</a>
                                <a href="/profissionais">Profissionais</a>
                                <a href="/premium">Premium</a>
                                <a href="/login">Login</a>
                                <a href="/">Sobre nós</a> 
                                <a href="/tipoNutri">Como escolher o profissional ideal?</a>
                            </section>
                      
                          <section class="footer-social">
                              <p>Conecte-se com os melhores nutricionistas e encontre o profissional ideal para você.</p>
                            <h3>Siga-nos</h3>
                            <section class="social-icons">
                              <a href="https://www.instagram.com/nutriweb_oficial/"><i class="fab fa-instagram"></i></a>
                            </section>
                          </section>
                        </section>
                        
                        <section class="footer-bottom">
                          <p>&copy; 2024 NutriWeb. Todos os direitos reservados.</p>
                        </section>
                    </footer>
         </section>
    </body>
    <script src="js/scriptPerfil.js"></script>
    <script src="js/indexMenu.js"></script>
    <script src="js/alerts.js"></script>
</html>