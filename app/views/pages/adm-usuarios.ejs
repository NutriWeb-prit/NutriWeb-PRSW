<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciar Usuários - Painel Administrativo</title>
    <link rel="stylesheet" href="/css/styleAdm.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="/css/admin-usuarios.css">
</head>
<body>
    <section class="navbar navbar-inverse">
        <section class="navbar-header">
            <ul class="nav navbar-nav">
                <li><a href="/adm">Dashboard</a></li>
                <li class="active"><a href="/adm/usuarios">Usuários</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/">Voltar ao Site</a></li>
            </ul>
        </section>
    </section>

    <section class="container-detalhes">
        <section class="page-header">
            <h2>
                <section class="material-symbols-outlined">group</section>
                Gerenciar Usuários
            </h2>
            <p class="page-subtitle">Visualize e gerencie todos os usuários cadastrados na plataforma</p>
        </section>

        <% if (typeof erro !== 'undefined' && erro) { %>
            <section class="alert alert-danger alert-dismissible">
                <button type="button" class="close" onclick="this.parentElement.style.display='none'">
                    <section>&times;</section>
                </button>
                <strong>Erro!</strong> <%= erro %>
            </section>
        <% } %>

        <section class="table-container">
            <section class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nome</th>
                            <th>Email</th>
                            <th>Telefone</th>
                            <th>Tipo</th>
                            <th>Status</th>
                            <th class="actions-column">Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% if (usuarios && usuarios.length > 0) { %>
                            <% usuarios.forEach(function(usuario) { %>
                                <tr>
                                    <td class="id-column"><%= usuario.id %></td>
                                    <td class="name-column"><%= usuario.NomeCompleto %></td>
                                    <td class="email-column"><%= usuario.Email %></td>
                                    <td class="phone-column">
                                        <%= usuario.Telefone ? 
                                            `(${usuario.Telefone.substring(0,2)}) ${usuario.Telefone.substring(2,7)}-${usuario.Telefone.substring(7)}` 
                                            : 'N/A' %>
                                    </td>
                                    <td>
                                        <section class="badge badge-<%= usuario.TipoUsuarioNome === 'Nutricionista' ? 'success' : 'info' %>">
                                            <%= usuario.TipoUsuarioNome %>
                                        </section>
                                    </td>
                                    <td>
                                        <section class="status-badge status-<%= usuario.UsuarioStatus === 1 ? 'ativo' : 'inativo' %>">
                                            <%= usuario.StatusNome %>
                                        </section>
                                    </td>
                                    <td class="actions-column">
                                        <section class="btn-group-actions">
                                            <a href="/adm/usuarios-detalhes?id=<%= usuario.id %>" 
                                               class="btn btn-info btn-sm" 
                                               title="Visualizar detalhes">
                                                <section class="material-symbols-outlined">visibility</section>
                                                Detalhes
                                            </a>
                                            <a href="/adm/usuarios-editar?id=<%= usuario.id %>" 
                                               class="btn btn-warning btn-sm"
                                               title="Editar usuário">
                                                <section class="material-symbols-outlined">edit</section>
                                                Editar
                                            </a>
                                            <a href="/adm/usuarios-excluir?id=<%= usuario.id %>" 
                                               class="btn btn-danger btn-sm"
                                               title="Inativar usuário">
                                                <section class="material-symbols-outlined">block</section>
                                                Inativar
                                            </a>
                                        </section>
                                    </td>
                                </tr>
                            <% }); %>
                        <% } else { %>
                            <tr>
                                <td colsection="7" class="empty-state">
                                    <section class="material-symbols-outlined">person_off</section>
                                    <p>Nenhum usuário encontrado</p>
                                </td>
                            </tr>
                        <% } %>
                    </tbody>
                </table>
            </section>
        </section>

        <footer>
            <p>&copy; 2025 Sistema NutriWeb | Painel Administrativo</p>
        </footer>
    </section>
</body>
</html>